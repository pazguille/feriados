var Slideout=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";function n(){}n.prototype.on=function(t,e){return this._collection=this._collection||{},this._collection[t]=this._collection[t]||[],this._collection[t].push(e),this},n.prototype.once=function(t,e){var i=this;function n(){i.off(t,n),e.apply(this,arguments)}return n.listener=e,this.on(t,n),this},n.prototype.off=function(t,e){var i=this._collection&&this._collection[t],n=0;if(void 0!==i){for(;n<i.length;n+=1)if(i[n]===e||i[n].listener===e){i.splice(n,1);break}0===i.length&&this.removeAllListeners(t)}return this},n.prototype.removeAllListeners=function(t){return this._collection=this._collection||{},delete this._collection[t],this},n.prototype.listeners=function(t){return this._collection=this._collection||{},this._collection[t]},n.prototype.emit=function(){if(void 0===this._collection)return this;var t,e=[].slice.call(arguments,0),i=e.shift(),n=this._collection[i],s=0;if(n)for(t=(n=n.slice(0)).length;s<t;s+=1)n[s].apply(this,e);return this},t.exports=n},function(t,e,i){"use strict";var n,s,o=i(0),r="slideout-panel",a="slideout-menu",h="slideout-move",c=!1,l=document.documentElement,u=navigator.msPointerEnabled,p={start:u?"MSPointerDown":"touchstart",move:u?"MSPointerMove":"touchmove",end:u?"MSPointerUp":"touchend"},d="touchstart"===p.start&&{passive:!0,capture:!1},_="touchstart"===p.start&&{passive:!1,capture:!1};function m(t){t=t||{},this._startOffsetX=0,this._startOffsetY=0,this._currentOffsetX=0,this._opening=!1,this._moved=!1,this._opened=!1,this._preventOpen=!1,this.panel=t.panel,this.menu=t.menu,this.itemToMove="panel"===t.itemToMove?this.panel:this.menu,this.dimmer=document.createElement("div"),this.dimmer.className="slideout-dimmer",this.panel.insertBefore(this.dimmer,this.panel.firstChild),this._touch=void 0===t.touch||t.touch&&!0,this._side=t.side||"left",this._easing=t.fx||t.easing||"ease",this._duration=parseInt(t.duration,10)||300,this._tolerance=parseInt(t.tolerance,10)||70,this._padding=this._translateTo=parseInt(t.padding,10)||256,this._orientation="right"===this._side?-1:1,this._translateTo*=this._orientation,this._grabWidth=parseInt(t.grabWidth,10)||Math.round(l.clientWidth/3),this.panel.classList.contains(r)||this.panel.classList.add(r),this.panel.classList.contains(r+"-"+this._side)||this.panel.classList.add(r+"-"+this._side),this.menu.classList.contains(a)||this.menu.classList.add(a),this.menu.classList.contains(a+"-"+this._side)||this.menu.classList.add(a+"-"+this._side),"panel"===t.itemToMove?this.panel.classList.add(h):this.menu.classList.add(h);var e=this;this._closeByDimmer=function(t){e._opened&&(t.preventDefault(),t.stopPropagation(),e.close())},this._touch&&this._initTouchEvents()}s=o,(n=m).prototype=function(t,e){for(var i in e)e[i]&&(t[i]=e[i]);return t}(n.prototype||{},s.prototype),m.prototype.open=function(){var t=this;return this.emit("before:open"),l.classList.contains("slideout-open")||l.classList.add("slideout-open"),this._addTransition(),this._translateXTo(this._translateTo),this.panel.addEventListener("click",this._closeByDimmer,!0),this._opened=!0,setTimeout(function(){t._removeTransition(),t.emit("open")},this._duration+50),this},m.prototype.close=function(){var t=this;return this.isOpen()||this._opening?(this.emit("before:close"),this._addTransition(),this._translateXTo(0),this.panel.removeEventListener("click",this._closeByDimmer),this._opened=!1,setTimeout(function(){l.classList.remove("slideout-open"),t.itemToMove.style["-webkit-transform"]=t.itemToMove.style.transform=null,t._removeTransition(),t.emit("close")},this._duration+50),this):this},m.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},m.prototype.isOpen=function(){return this._opened},m.prototype._translateXTo=function(t){return this._currentOffsetX=t,this.itemToMove.style["-webkit-transform"]=this.itemToMove.style.transform="translateX("+t+"px)",this.dimmer.style.opacity=(Math.abs(t)/this.menu.offsetWidth).toFixed(4),this},m.prototype._addTransition=function(){return this.itemToMove.style["-webkit-transition"]="-webkit-transform "+this._duration+"ms "+this._easing,this.itemToMove.style.transition="transform "+this._duration+"ms "+this._easing,this.dimmer.style["-webkit-transition"]=this.dimmer.style.transition="opacity "+this._duration+"ms "+this._easing,this},m.prototype._removeTransition=function(){return this.itemToMove.style.transition=this.itemToMove.style["-webkit-transition"]=null,this.dimmer.style.transition=this.dimmer.style["-webkit-transition"]=null,this.dimmer.style.opacity=null,this},m.prototype._initTouchEvents=function(){var t=this;return this._preventMove=function(e){t._moved&&e.preventDefault()},document.addEventListener(p.move,this._preventMove,_),this._resetTouchFn=function(e){if(void 0!==e.touches){t._moved=!1,t._opening=!1,t._startOffsetX=e.touches[0].pageX,t._startOffsetY=e.touches[0].pageY;var i=t._startOffsetX;"right"===t._side&&(i=l.clientWidth-t._startOffsetX),t._preventOpen=!t._touch||this===t.panel&&i>t._grabWidth}},this.panel.addEventListener(p.start,this._resetTouchFn,d),this.menu.addEventListener(p.start,this._resetTouchFn,d),this._onTouchCancelFn=function(){t._moved=!1,t._opening=!1},this.panel.addEventListener("touchcancel",this._onTouchCancelFn),this.menu.addEventListener("touchcancel",this._onTouchCancelFn),this._onTouchEndFn=function(){t._moved&&(t.emit("translate:end"),t._opening&&Math.abs(t._currentOffsetX)>t._tolerance?t.open():t.close()),t._moved=!1,c=!1},this.panel.addEventListener(p.end,this._onTouchEndFn,d),this.menu.addEventListener(p.end,this._onTouchEndFn,d),this._onTouchMoveFn=function(e){if(!(c||t._preventOpen||void 0===e.touches||function(t){for(;t.parentNode;){if(null!==t.getAttribute("data-slideout-ignore"))return t;t=t.parentNode}return null}(e.target))){var i=e.touches[0].pageX-t._startOffsetX,n=e.touches[0].pageY-t._startOffsetY;if(!(180*Math.atan2(Math.abs(n),Math.abs(i))/Math.PI>45)||t._opening){e.cancelable&&e.preventDefault(),e.stopPropagation();var s=t._currentOffsetX=i;if(!(Math.abs(s)>t._padding)&&Math.abs(i)>20){t._opening=!0;var o=i*t._orientation;if(t._opened&&o>0||!t._opened&&o<0)return;t._moved||t.emit("translate:start"),o<=0&&(s=i+t._padding*t._orientation,t._opening=!1),t._moved&&l.classList.contains("slideout-open")||l.classList.add("slideout-open"),t._translateXTo(s),t.emit("translate",s),t._moved=!0}}else c=!0}},this.panel.addEventListener(p.move,this._onTouchMoveFn,_),this.menu.addEventListener(p.move,this._onTouchMoveFn,_),this},m.prototype.enableTouch=function(){return this._touch=!0,this},m.prototype.disableTouch=function(){return this._touch=!1,this},m.prototype.destroy=function(){return this.close(),document.removeEventListener(p.move,this._preventMove,_),this.panel.removeEventListener(p.start,this._resetTouchFn,d),this.panel.removeEventListener("touchcancel",this._onTouchCancelFn),this.panel.removeEventListener(p.end,this._onTouchEndFn,d),this.panel.removeEventListener(p.move,this._onTouchMoveFn,_),this.open=this.close=function(){},this},t.exports=m}]);

import { $$ } from './html.js';

const slideout = new Slideout({
  panel: $$('#panel'),
  menu: $$('#menu'),
  side: 'right',
  touch: false,
  itemToMove: 'panel',
  padding: 65,
});

$$('[data-js="slideout-toggle"]').addEventListener('click', () => {
  import('./bright-events.js');
  slideout.toggle();
});

$$('[data-js="menu-container"]').addEventListener('click', (eve) => {
  if (eve.target.nodeName === 'BUTTON') {
    slideout.close();
  }
});

$$('[data-js="reload"]').addEventListener('click', () => {
  window.location.reload();
});

export default slideout;
